<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ma Carte de Voyage</title>

    <!-- Leaflet & Fonts -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css" />
</head>

<body>

    <!-- Map Container -->
    <div id="map"></div>

    <!-- Sidebar (Left Panel) -->
    <aside id="sidebar" class="sidebar glass-panel closed">
        <div class="sidebar-header">
            <h2 class="app-title">MapPins</h2>
            <div id="mini-stats" class="mini-stats">
                <!-- Stats injected by JS -->
                <span>ğŸ“ Chargement...</span>
            </div>
            <button id="close-sidebar-btn" class="icon-btn mobile-only">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18M6 6l12 12"></path>
                </svg>
            </button>
        </div>

        <div class="search-container">
            <div class="search-input-wrapper">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="search-icon">
                    <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2" />
                    <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                </svg>
                <input type="text" id="search-input" placeholder="Rechercher un lieu...">
            </div>
        </div>

        <div id="pins-list" class="pins-list">
            <!-- Pins injected by JS -->
        </div>
    </aside>

    <!-- UI Overlay Container (Pointer events managed in CSS) -->
    <div class="ui-overlay">

        <!-- Header / Menu Button -->
        <div class="top-bar-overlay">
            <button id="menu-btn" class="glass-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12h18M3 6h18M3 18h18" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </button>
        </div>

        <!-- Floating Action Button (Add Pin) -->
        <button id="add-pin-btn" class="fab primary-gradient" aria-label="Ajouter un lieu">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 5V19M5 12H19" stroke="white" stroke-width="2.5" stroke-linecap="round"
                    stroke-linejoin="round" />
            </svg>
        </button>

        <!-- Legend / Filter Panel -->
        <div class="bottom-panel glass-panel" id="legend-panel">
            <div class="panel-handle"></div>
            <div class="filter-scroll">
                <button class="filter-chip active" data-type="all">Tout</button>
                <button class="filter-chip" data-type="restaurant">ğŸ• Resto</button>
                <button class="filter-chip" data-type="bar">ğŸº Bar</button>
                <button class="filter-chip" data-type="tourist-site">ğŸ“· Tourisme</button>
                <button class="filter-chip" data-type="18">ğŸ” +18</button>
                <button class="filter-chip" data-type="other">ğŸ“ Autre</button>
            </div>
        </div>
    </div>

    <!-- Modal Form (Hidden by default) -->
    <div class="modal-backdrop hidden" id="modal-backdrop">
        <div class="modal glass-panel">
            <div class="modal-header">
                <h2>Nouveau Lieu</h2>
                <button type="button" class="close-btn" id="cancelButton">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <form id="pinForm">
                <div class="input-group">
                    <label for="name">Nom du lieu</label>
                    <input type="text" id="name" placeholder="Ex: Tour Eiffel" required>
                </div>

                <div class="input-group">
                    <label for="type">CatÃ©gorie</label>
                    <div class="select-wrapper">
                        <select id="type" required>
                            <option value="restaurant">ğŸ• Restaurant</option>
                            <option value="bar">ğŸº Bar</option>
                            <option value="tourist-site">ğŸ“· Site Touristique</option>
                            <option value="18">ğŸ” Adulte (+18)</option>
                            <option value="other">ğŸ“ Autre</option>
                        </select>
                    </div>
                </div>

                <div class="input-group">
                    <label for="date">Date de visite</label>
                    <input type="date" id="date" required>
                </div>

                <div class="input-group">
                    <label for="description">Note / Description</label>
                    <textarea id="description" rows="3" placeholder="C'Ã©tait comment ?"></textarea>
                </div>

                <button type="submit" class="submit-btn primary-gradient">Enregistrer</button>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script src="script.js"></script>
</body>

</html>